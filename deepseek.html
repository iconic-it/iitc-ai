<div id="chatbot">
    <div id="messages" style="height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;"></div>
    <input type="text" id="userInput" placeholder="Type your message here..." style="width: 70%; padding: 8px;">
    <button id="sendButton" style="padding: 8px 15px;">Send</button>
</div>

<script>
    async function fetchAIResponse(userMessage) {
        const apiKey = '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';
        const apiUrl = 'https://openrouter.ai/api/v1/chat/completions';

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json',
                    'HTTP-Referer': window.location.origin, // Required
                    'X-Title': 'My Chat App' // Recommended
                },
                body: JSON.stringify({
                    model: "openai/gpt-3.5-turbo", // Must be a valid model
                    messages: [{
                        role: "user",
                        content: userMessage
                    }],
                    temperature: 0.7
                }),
            });

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(errorData.error?.message || `API request failed with status ${response.status}`);
            }

            const data = await response.json();
            return data.choices[0]?.message?.content || "No response content found";
        } catch (error) {
            console.error('API Error:', error);
            return `Error: ${error.message}`;
        }
    }
</script>
<script src="java_api.js" defer></script>
